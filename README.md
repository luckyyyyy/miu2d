# å‰‘ä¾ æƒ…ç¼˜å¤–ä¼ ï¼šæœˆå½±ä¼ è¯´ Web å¤åˆ»ç‰ˆ

## ğŸ“– å…³äºæœ¬é¡¹ç›®

è¿™æ˜¯**è¥¿å±±å±… 2001 å¹´**æ¨å‡ºçš„ç»å…¸å•æœº RPGã€Šå‰‘ä¾ æƒ…ç¼˜å¤–ä¼ ï¼šæœˆå½±ä¼ è¯´ã€‹çš„ Web ç‰ˆæœ¬å¤åˆ»ã€‚

åŸå§‹æ¸¸æˆä½¿ç”¨ C++ å¼€å‘ï¼Œåæ¥æœ‰ç©å®¶ç”¨ C# + XNA æ¡†æ¶è¿›è¡Œäº†å¤åˆ»ï¼ˆ[JxqyHD](https://github.com/mapic91/JxqyHD)ï¼‰ï¼Œæœ¬é¡¹ç›®åœ¨æ­¤åŸºç¡€ä¸Šä½¿ç”¨ **TypeScript + React + Canvas** æŠ€æœ¯å°†æ¸¸æˆç§»æ¤åˆ° Web å¹³å°ï¼Œè®©ç»å…¸æ¸¸æˆèƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚

![æ¸¸æˆæˆªå›¾](docs/screenshot.png)
![æ¸¸æˆæˆªå›¾](docs/screenshot2.png)

## ğŸ® æ¸¸æˆç®€ä»‹

ã€Šå‰‘ä¾ æƒ…ç¼˜å¤–ä¼ ï¼šæœˆå½±ä¼ è¯´ã€‹æ˜¯è¥¿å±±å±…åœ¨å‰‘ä¾ æƒ…ç¼˜ç³»åˆ—åŸºç¡€ä¸Šæ¨å‡ºçš„å¤–ä¼ ä½œå“ï¼Œè®²è¿°äº†æ¨å½±æ«çš„æˆé•¿æ•…äº‹ã€‚æ¸¸æˆç‰¹è‰²ï¼š

- ğŸ—ºï¸ **æ­¦ä¾ ä¸–ç•Œæ¢ç´¢** - å‡Œç»å³°ã€æ­¦å½“å±±ã€æƒ å®‰é•‡ç­‰ç»å…¸åœºæ™¯
- âš”ï¸ **å³æ—¶æˆ˜æ–—ç³»ç»Ÿ** - å‰‘æ³•ã€å†…åŠŸã€è½»åŠŸçš„ç»„åˆè¿ç”¨
- ğŸ§™ **æ­¦å­¦æŠ€èƒ½** - ä¸°å¯Œçš„æ­¦åŠŸæ‹›å¼å’Œå†…åŠŸå¿ƒæ³•
- ğŸ’¬ **å‰§æƒ…ä»»åŠ¡** - è·Ÿéšä¸»è§’æ¨å½±æ«å±•å¼€æ­¦ä¾ å†’é™©
- ğŸ’ **è£…å¤‡ç³»ç»Ÿ** - æ”¶é›†è£…å¤‡å’Œé“å…·æå‡æˆ˜åŠ›
- ğŸµ **åŸç‰ˆéŸ³ä¹** - ä¿ç•™ç»å…¸é…ä¹å’ŒéŸ³æ•ˆ

---

## âœ¨ å®ç°è¿›åº¦

### æ€»ä½“å®Œæˆåº¦ï¼šçº¦ 75%

| ç³»ç»Ÿ | è¿›åº¦ | çŠ¶æ€ |
|------|------|------|
| åœ°å›¾æ¸²æŸ“ | 85% | ğŸŸ¢ å¯ç”¨ |
| è§’è‰²ç³»ç»Ÿ | 75% | ğŸŸ¢ å¯ç”¨ |
| ç²¾çµåŠ¨ç”» | 80% | ğŸŸ¢ å¯ç”¨ |
| å‰§æœ¬ç³»ç»Ÿ | 90% | ğŸŸ¢ å¯ç”¨ |
| ç•Œé¢ç³»ç»Ÿ | 80% | ğŸŸ¢ å¯ç”¨ |
| è¾“å…¥ç³»ç»Ÿ | 90% | ğŸŸ¢ å¯ç”¨ |
| éŸ³æ•ˆç³»ç»Ÿ | 85% | ğŸŸ¢ å¯ç”¨ |
| ç‰¹æ•ˆç³»ç»Ÿ | 50% | ğŸŸ¡ éƒ¨åˆ† |
| ç‰©å“ç³»ç»Ÿ | 75% | ğŸŸ¢ å¯ç”¨ |
| ç‰©ä½“ç³»ç»Ÿ | 60% | ğŸŸ¡ éƒ¨åˆ† |
| æ­¦åŠŸç³»ç»Ÿ | 70% | ğŸŸ¢ å¯ç”¨ |
| æˆ˜æ–—ç³»ç»Ÿ | 30% | ğŸŸ¡ éƒ¨åˆ† |
| å­˜æ¡£ç³»ç»Ÿ | 80% | ğŸŸ¢ å¯ç”¨ |
| é«˜çº§å¯»è·¯ | 0% | ğŸ”´ æœªå¼€å§‹ |

**å›¾ä¾‹**: ğŸŸ¢ å¯ç”¨ | ğŸŸ¡ éƒ¨åˆ†/è¿›è¡Œä¸­ | ğŸ”´ æœªå¼€å§‹

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript 5.9
- **æ¡†æ¶**: React 19, Vite 7
- **æ¸²æŸ“**: HTML5 Canvas 2D
- **æ ·å¼**: Tailwind CSS 4
- **éŸ³é¢‘**: Web Audio API (OGG Vorbis)

### æ ¸å¿ƒæ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨**åˆ†å±‚æ¶æ„**ï¼Œä¸¥æ ¼éµå¾ª C# ç‰ˆæœ¬çš„è®¾è®¡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    React UI Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  pages/          GameScreen, TitleScreen            â”‚   â”‚
â”‚  â”‚  components/game/ Game, GameCanvas, GameUI          â”‚   â”‚
â”‚  â”‚  components/ui/   å¯¹è¯æ¡†, èƒŒåŒ…, è£…å¤‡, æ­¦åŠŸç•Œé¢ç­‰      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ äº‹ä»¶è®¢é˜… / API è°ƒç”¨
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 GameEngine (å•ä¾‹ - å”¯ä¸€å…¥å£)                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GlobalResourceManager (å…¨å±€èµ„æº - åªåŠ è½½ä¸€æ¬¡)         â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ TalkTextList    å¯¹è¯æ–‡æœ¬æ•°æ®                     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ LevelManager    ç­‰çº§é…ç½®                         â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ MagicExpConfig  æ­¦åŠŸç»éªŒé…ç½®                     â”‚   â”‚
â”‚  â”‚  â””â”€â”€ PartnerList     ä¼™ä¼´åå•                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ ¸å¿ƒå­ç³»ç»Ÿ (ç”± GameEngine åˆ›å»ºå’ŒæŒæœ‰)                  â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ AudioManager      éŸ³æ•ˆç®¡ç† (Web Audio API)       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ScreenEffects     å±å¹•ç‰¹æ•ˆ                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ObjManager        ç‰©ä½“ç®¡ç†                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ DebugManager      è°ƒè¯•ç³»ç»Ÿ                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ MemoListManager   ä»»åŠ¡è®°å½•                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ MapTrapManager    åœ°å›¾é™·é˜±                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ MapRenderer       åœ°å›¾æ¸²æŸ“                       â”‚   â”‚
â”‚  â”‚  â””â”€â”€ ObjRenderer       ç‰©ä½“æ¸²æŸ“                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GameManager (æ¸¸æˆé€»è¾‘æ§åˆ¶å™¨)                          â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Player            ç©å®¶è§’è‰²                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ NpcManager        NPC ç®¡ç†                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ GuiManager        ç•Œé¢çŠ¶æ€ç®¡ç†                   â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ScriptExecutor    å‰§æœ¬æ‰§è¡Œå™¨                     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ GoodsListManager  ç‰©å“åˆ—è¡¨                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ MagicListManager  æ­¦åŠŸåˆ—è¡¨                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ MagicManager      æ­¦åŠŸé€»è¾‘å’Œæ¸²æŸ“                 â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ InputHandler      è¾“å…¥å¤„ç†                       â”‚   â”‚
â”‚  â”‚  â””â”€â”€ InteractionManager äº¤äº’ç®¡ç†                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  EventEmitter (äº‹ä»¶ç³»ç»Ÿ - å¼•æ“ä¸UIé€šä¿¡)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆå§‹åŒ–æµç¨‹

å‚ç…§ C# çš„ `JxqyGame.cs` å’Œ `Loader.cs`ï¼Œåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š

```typescript
// 1. å¼•æ“åˆå§‹åŒ– (åªæ‰§è¡Œä¸€æ¬¡)
await engine.initialize();
// - åŠ è½½å…¨å±€èµ„æº (TalkTextList, LevelManager, MagicExpç­‰)
// - åˆ›å»ºæ¸²æŸ“å™¨å’Œæ¸¸æˆç®¡ç†å™¨

// 2. æ–°æ¸¸æˆ
await engine.newGame();
// - è¿è¡Œ NewGame.txt è„šæœ¬
// - è„šæœ¬è°ƒç”¨ LoadGame(0) åŠ è½½åˆå§‹å­˜æ¡£

// 3. è¯»å–å­˜æ¡£
await engine.loadGame(saveIndex);
// - æ¸…ç†å½“å‰çŠ¶æ€
// - ä»å­˜æ¡£ç›®å½•åŠ è½½æ•°æ®
```

### è®¾è®¡åŸåˆ™

- **å•ä¸€å…¥å£**ï¼šæ‰€æœ‰å­ç³»ç»Ÿè®¿é—®éƒ½é€šè¿‡ `GameEngine`ï¼Œä¸ä½¿ç”¨å…¨å±€å•ä¾‹å‡½æ•°
- **ä¾èµ–æ³¨å…¥**ï¼šå­ç³»ç»Ÿé€šè¿‡æ„é€ å‡½æ•°æˆ– setter æ¥æ”¶ä¾èµ–
- **äº‹ä»¶é©±åŠ¨**ï¼šå¼•æ“é€šè¿‡ `EventEmitter` é€šçŸ¥ UI å±‚çŠ¶æ€å˜åŒ–
- **åˆ†ç¦»å…³æ³¨**ï¼šå¼•æ“é€»è¾‘ä¸ React æ¸²æŸ“å®Œå…¨åˆ†ç¦»

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
game-jxqy/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ engine/                  # æ¸¸æˆå¼•æ“ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ index.ts             # ä¸»å¯¼å‡ºæ–‡ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts         # æ ¸å¿ƒç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ mapTypes.ts      # åœ°å›¾ç›¸å…³ç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ utils.ts         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ binaryUtils.ts   # äºŒè¿›åˆ¶è§£æå·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ eventEmitter.ts  # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ gameEvents.ts    # æ¸¸æˆäº‹ä»¶å®šä¹‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ game/                # æ¸¸æˆç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ gameEngine.ts    # å¼•æ“å•ä¾‹ï¼ˆå…¥å£ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ gameManager.ts   # æ¸¸æˆé€»è¾‘æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ inputHandler.ts  # è¾“å…¥å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ loader.ts        # å­˜æ¡£åŠ è½½å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts       # å­˜æ¡£å­˜å‚¨
â”‚   â”‚   â”‚   â””â”€â”€ scriptContextFactory.ts  # è„šæœ¬ä¸Šä¸‹æ–‡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ resource/            # èµ„æºç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ globalResourceManager.ts  # å…¨å±€èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ mpc.ts           # MPC èµ„æºåŒ…è§£æ
â”‚   â”‚   â”‚   â””â”€â”€ resFile.ts       # èµ„æºæ–‡ä»¶è§£æ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ map/                 # åœ°å›¾ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ map.ts           # åœ°å›¾è§£æ
â”‚   â”‚   â”‚   â”œâ”€â”€ renderer.ts      # åœ°å›¾æ¸²æŸ“
â”‚   â”‚   â”‚   â””â”€â”€ mapTrapManager.ts # é™·é˜±ç®¡ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ sprite/              # ç²¾çµç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ sprite.ts        # ç²¾çµç±»
â”‚   â”‚   â”‚   â””â”€â”€ asf.ts           # ASF åŠ¨ç”»åŠ è½½
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ character/           # è§’è‰²ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ characterBase.ts # è§’è‰²åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ player.ts        # ç©å®¶
â”‚   â”‚   â”‚   â”œâ”€â”€ npc.ts           # NPC
â”‚   â”‚   â”‚   â””â”€â”€ npcManager.ts    # NPC ç®¡ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ script/              # å‰§æœ¬ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ parser.ts        # è§£æå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ executor.ts      # æ‰§è¡Œå™¨
â”‚   â”‚   â”‚   â””â”€â”€ commands/        # å‘½ä»¤å¤„ç†å™¨ï¼ˆæŒ‰ç±»å‹åˆ†ç±»ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ types.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ dialogCommands.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ npcCommands.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ miscCommands.ts
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ magic/               # æ­¦åŠŸç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ magicManager.ts  # æ­¦åŠŸé€»è¾‘å’Œæ¸²æŸ“
â”‚   â”‚   â”‚   â”œâ”€â”€ magicListManager.ts
â”‚   â”‚   â”‚   â””â”€â”€ magicLoader.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ goods/               # ç‰©å“ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ good.ts
â”‚   â”‚   â”‚   â””â”€â”€ goodsListManager.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ obj/                 # ç‰©ä½“ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ obj.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ objManager.ts
â”‚   â”‚   â”‚   â””â”€â”€ objRenderer.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ gui/                 # ç•Œé¢çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ guiManager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ fonts.ts
â”‚   â”‚   â”‚   â””â”€â”€ uiSettings.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ audio/               # éŸ³æ•ˆç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ audioManager.ts  # Web Audio API å®ç°
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ effects/             # ç‰¹æ•ˆç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ screenEffects.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ level/               # ç­‰çº§ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ levelManager.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ listManager/         # åˆ—è¡¨ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ memoListManager.ts
â”‚   â”‚   â”‚   â””â”€â”€ talkTextList.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ debug/               # è°ƒè¯•ç³»ç»Ÿ
â”‚   â”‚       â””â”€â”€ debugManager.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ game/                # æ¸¸æˆæ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Game.tsx         # æ¸¸æˆä¸»ç»„ä»¶ï¼ˆCanvas + UIï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ GameCanvas.tsx   # Canvas æ¸²æŸ“
â”‚   â”‚   â”‚   â”œâ”€â”€ GameUI.tsx       # æ¸¸æˆå†… UI å±‚
â”‚   â”‚   â”‚   â””â”€â”€ LoadingOverlay.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ui/                  # UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ DialogUI.tsx     # å¯¹è¯æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ SelectionUI.tsx  # é€‰é¡¹èœå•
â”‚   â”‚   â”‚   â”œâ”€â”€ GoodsGui.tsx     # ç‰©å“æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ EquipGui.tsx     # è£…å¤‡ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MagicGui.tsx     # æ­¦åŠŸç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ StateGui.tsx     # çŠ¶æ€ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoGui.tsx      # ä»»åŠ¡è®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ SystemMenuModal.tsx  # ç³»ç»Ÿèœå•ï¼ˆå­˜è¯»æ¡£ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ TopGui.tsx       # é¡¶éƒ¨çŠ¶æ€æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ BottomGui.tsx    # åº•éƒ¨å¿«æ·æ 
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ MapViewer.tsx        # åœ°å›¾æŸ¥çœ‹å™¨ï¼ˆå¼€å‘å·¥å…·ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                   # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ GameScreen.tsx       # æ¸¸æˆä¸»é¡µé¢
â”‚   â”‚   â””â”€â”€ TitleScreen.tsx      # æ ‡é¢˜é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                   # React Hooks
â”‚   â”‚   â””â”€â”€ useGameEngine.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                  # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.css
â”‚   â”‚
â”‚   â”œâ”€â”€ constants/               # å¸¸é‡å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                  # åº”ç”¨å…¥å£ï¼ˆé¡µé¢è·¯ç”±ï¼‰
â”‚   â””â”€â”€ main.tsx                 # ä¸»å…¥å£
â”‚
â”œâ”€â”€ resources/                   # æ¸¸æˆèµ„æº
â”‚   â”œâ”€â”€ map/                     # åœ°å›¾æ–‡ä»¶ (.map)
â”‚   â”œâ”€â”€ asf/                     # ç²¾çµåŠ¨ç”» (.asf)
â”‚   â”œâ”€â”€ mpc/                     # èµ„æºåŒ… (.mpc)
â”‚   â”œâ”€â”€ ini/                     # é…ç½®æ–‡ä»¶ (.ini)
â”‚   â”œâ”€â”€ script/                  # æ¸¸æˆå‰§æœ¬ (.txt)
â”‚   â”œâ”€â”€ save/                    # å­˜æ¡£ç›®å½•
â”‚   â””â”€â”€ Content/                 # åª’ä½“èµ„æº
â”‚       â”œâ”€â”€ music/               # èƒŒæ™¯éŸ³ä¹ (.ogg)
â”‚       â””â”€â”€ sound/               # éŸ³æ•ˆæ–‡ä»¶ (.ogg)
â”‚
â”œâ”€â”€ scripts/                     # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ convert-encoding.sh      # æ–‡æœ¬ç¼–ç è½¬æ¢ (GBK â†’ UTF-8)
â”‚   â””â”€â”€ convert-sound.py         # éŸ³æ•ˆè½¬æ¢ (XNB â†’ OGG)
â”‚
â”œâ”€â”€ docs/                        # æ–‡æ¡£å’Œæˆªå›¾
â”‚
â””â”€â”€ JxqyHD/                      # C# å‚è€ƒä»£ç 
    â””â”€â”€ Engine/                  # å¼•æ“æºç å‚è€ƒ
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** 18+
- **pnpm**ï¼ˆæ¨èï¼‰æˆ– npm/yarn
- æ”¯æŒ Canvas API å’Œ Web Audio API çš„ç°ä»£æµè§ˆå™¨

### å®‰è£…è¿è¡Œ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/patchoulib/game-jxqy.git
cd game-jxqy

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
pnpm build
pnpm preview
```

---

## ğŸ® æ“ä½œæŒ‡å—

### é”®ç›˜æ§åˆ¶

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| `æ–¹å‘é”®` / ç‚¹å‡»åœ°é¢ | ç§»åŠ¨ |
| `Shift` + ç§»åŠ¨ | å¥”è·‘ |
| `Space` / `Enter` | ä¸ NPC äº¤äº’ / ç¡®è®¤å¯¹è¯ |
| `Esc` | å–æ¶ˆ / å…³é—­èœå• / ç³»ç»Ÿèœå• |
| `1` - `9` | ä½¿ç”¨å¿«æ·æ æ­¦åŠŸ |

### é¼ æ ‡æ§åˆ¶

| æ“ä½œ | åŠŸèƒ½ |
|------|------|
| å·¦é”®ç‚¹å‡»åœ°é¢ | ç§»åŠ¨åˆ°ä½ç½® |
| å·¦é”®ç‚¹å‡» NPC/ç‰©ä½“ | äº¤äº’ |
| å³é”®ç‚¹å‡» NPC/ç‰©ä½“ | ä½¿ç”¨å¤‡ç”¨è„šæœ¬ |

---

## ğŸ’» å¼€å‘æŒ‡å—

### é¡¹ç›®å‘½ä»¤

```bash
pnpm dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm preview      # é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
pnpm lint         # ä»£ç æ£€æŸ¥
```

### å¼€å‘åŸåˆ™

1. **ä¸¥æ ¼éµå¾ª C# æ¶æ„** - æ‰€æœ‰æ–°åŠŸèƒ½å¿…é¡»å…ˆæŸ¥çœ‹ `/JxqyHD/Engine/` ä¸­çš„å¯¹åº”å®ç°
2. **é€šè¿‡å¼•æ“è®¿é—®** - æ‰€æœ‰å­ç³»ç»Ÿè®¿é—®éƒ½é€šè¿‡ `GameEngine`ï¼Œä¸åˆ›å»ºç‹¬ç«‹çš„å…¨å±€å•ä¾‹
3. **ä¿æŒç±»å‹å®‰å…¨** - ä½¿ç”¨ TypeScript strict modeï¼Œé¿å… `any`
4. **äº‹ä»¶é©±åŠ¨é€šä¿¡** - å¼•æ“ä¸ UI é€šè¿‡äº‹ä»¶é€šä¿¡ï¼Œä¿æŒè§£è€¦

### èµ„æºæ–‡ä»¶æ ¼å¼

| æ ¼å¼ | è¯´æ˜ | ä½ç½® |
|------|------|------|
| `.map` | åœ°å›¾æ•°æ®ï¼ˆç“¦ç‰‡ã€ç¢°æ’ï¼‰ | `/resources/map/` |
| `.asf` | ç²¾çµåŠ¨ç”»å¸§ | `/resources/asf/` |
| `.mpc` | å‹ç¼©èµ„æºåŒ… | `/resources/mpc/` |
| `.ini` | é…ç½®æ–‡ä»¶ï¼ˆNPCã€ç‰©å“ç­‰ï¼‰ | `/resources/ini/` |
| `.txt` | æ¸¸æˆå‰§æœ¬ | `/resources/script/` |
| `.ogg` | éŸ³é¢‘æ–‡ä»¶ï¼ˆéŸ³ä¹å’ŒéŸ³æ•ˆï¼‰ | `/resources/Content/` |

### å·¥å…·è„šæœ¬

```bash
# è½¬æ¢æ–‡æœ¬ç¼–ç  (GBK â†’ UTF-8)
./scripts/convert-encoding.sh

# è½¬æ¢éŸ³æ•ˆæ–‡ä»¶ (XNB â†’ OGGï¼Œå°å†™æ–‡ä»¶å)
python3 scripts/convert-sound.py
```

è¯¦ç»†å¼€å‘æŒ‡å—è¯·å‚é˜… [.github/copilot-instructions.md](.github/copilot-instructions.md)

---

## ğŸ—ºï¸ å¼€å‘è·¯çº¿

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŸºç¡€ âœ…
- [x] åœ°å›¾æ¸²æŸ“ç³»ç»Ÿ
- [x] è§’è‰²ç§»åŠ¨å’ŒåŠ¨ç”»
- [x] å‰§æœ¬ç³»ç»Ÿ
- [x] åŸºç¡€ç•Œé¢
- [x] æ“ä½œæ§åˆ¶
- [x] éŸ³æ•ˆç³»ç»Ÿï¼ˆWeb Audio API + OGGï¼‰
- [x] æ¶æ„é‡æ„ï¼ˆGameEngine å•ä¾‹å…¥å£ï¼‰

### ç¬¬äºŒé˜¶æ®µï¼šæ¸¸æˆæœºåˆ¶ï¼ˆè¿›è¡Œä¸­ï¼‰
- [x] æ­¦åŠŸæŠ€èƒ½ï¼ˆåŸºç¡€å®Œæˆï¼‰
- [ ] æˆ˜æ–—ç³»ç»Ÿï¼ˆè¿›è¡Œä¸­ï¼‰
- [x] èƒŒåŒ…ç‰©å“
- [x] è£…å¤‡ç³»ç»Ÿ
- [x] å­˜æ¡£/è¯»æ¡£
- [ ] NPC AI

### ç¬¬ä¸‰é˜¶æ®µï¼šå®Œå–„åŠŸèƒ½
- [ ] ä»»åŠ¡ç³»ç»Ÿ
- [ ] å•†åº—äº¤æ˜“
- [ ] é«˜çº§å¯»è·¯ (A*)

### ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–ä¸æ‰©å±•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] ç§»åŠ¨ç«¯æ”¯æŒ
- [ ] æ‰‹æŸ„æ”¯æŒ
- [ ] è®¾ç½®èœå•

---

## ğŸ¤ å‚ä¸è´¡çŒ®

æ¬¢è¿æäº¤ Bug ä¿®å¤ã€æ–°åŠŸèƒ½æˆ–æ–‡æ¡£æ”¹è¿›ï¼

### è´¡çŒ®æ­¥éª¤

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/new-feature`)
3. å‚è€ƒ [å¼€å‘æŒ‡å—](.github/copilot-instructions.md)
4. æäº¤æ›´æ”¹ (`git commit -m 'æ·»åŠ æ–°åŠŸèƒ½'`)
5. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/new-feature`)
6. æäº¤ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

**æ³¨æ„**ï¼šè¿™æ˜¯ä¸€ä¸ªå­¦ä¹ æ€§è´¨çš„ç²‰ä¸é¡¹ç›®ï¼Œæ¸¸æˆç´ æå’ŒçŸ¥è¯†äº§æƒå½’åŸä½œè€…æ‰€æœ‰ã€‚

---

## ğŸ™ è‡´è°¢

- **åŸä½œæ¸¸æˆ**ï¼šè¥¿å±±å±… (Kingsoft) - å‰‘ä¾ æƒ…ç¼˜å¤–ä¼ ï¼šæœˆå½±ä¼ è¯´ (2001)
- **C# å¤åˆ»é¡¹ç›®**ï¼š[mapic91/JxqyHD](https://github.com/mapic91/JxqyHD)
- **æŠ€æœ¯æ ˆ**ï¼šTypeScript, React 19, Vite 7, Canvas API, Web Audio API

---

<div align="center">

**âš”ï¸ å‰‘æ°”çºµæ¨ªä¸‰ä¸‡é‡Œï¼Œä¸€å‰‘å…‰å¯’åä¹æ´² âš”ï¸**

*ç”¨ç°ä»£ Web æŠ€æœ¯é‡ç°ç»å…¸æ­¦ä¾ *

</div>
